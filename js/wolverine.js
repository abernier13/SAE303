import { animate } from 'https://esm.sh/animejs@4.2.2';

// Logan Démasqué (icons8-logan-x-hommes.svg)
const LOGAN_UNMASKED_SVG = `
    <g class="wolverine-state-logan">
        <path fill="#ffa726" d="M34 22.8c0 0 .3-2.8 3-2.8 1 0 1 2.7 1 3.5 0 1-1 2.5-1 3v.8c0 1-1.5 2.8-3 2.8V22.8zM14 22.8c0 0-.3-2.8-3-2.8-1 0-1 2.7-1 3.5 0 1 1 2.5 1 3v.8c0 1 1.5 2.8 3 2.8V22.8z"/>
        <path fill="#ffa726" d="M34,38.2V26H14v12.2c0,1.1-0.6,2-1.5,2.6C9.1,42.9,6,46,6,46h36c0,0-3.1-3.1-6.5-5.2 C34.6,40.3,34,39.3,34,38.2z"/>
        <path fill="#424242" d="M35.5,40.8C34,44,24,44,24,44s-10,0-11.5-3.2c-1.8,1.1-3.4,2.4-4.6,3.4C10,45,11,46,11,46h13h13 c0,0,1-1,3.1-1.8C38.9,43.2,37.2,41.9,35.5,40.8z"/>
        <path fill="#ffb74d" d="M24,4C12.3,4,13,14,13,14c0,3.7,0,13,0,13v6.6c0,0.9,0.4,1.7,1,2.3l6.1,5.4c0.5,0.5,1.2,0.7,2,0.7 H24h1.9c0.7,0,1.4-0.3,2-0.7l6.1-5.4c0.7-0.6,1-1.4,1-2.3V26c0,0,0-8.3,0-12C35,14,35.7,4,24,4z"/>
        <path fill="#fb8c00" d="M20.4,34.7l-0.9-1.8c0.1,0,1.8-0.9,4.4-0.9c2.6,0,4.4,0.9,4.4,0.9l-0.9,1.8c0,0-1.4-0.7-3.6-0.7 C21.9,34,20.5,34.7,20.4,34.7z"/>
        <path fill="#ffac3e" d="M35 13.3V24c0 0-1-1-4-1V9.2c0-2.2-2-4.4-2-4.4C34.2 6.7 34.9 11.5 35 13.3zM13 13.3V24c0 0 1-1 4-1V9.2c0-2.2 2-4.4 2-4.4C13.8 6.7 13.1 11.5 13 13.3z"/>
        <path fill="#424242" d="M35,4c-4.1,0-5.6-2-11-2s-6.9,2-11,2c-2,0-5-1-5-1c0,12,3,17,3,17c0.1,0,0.3,0,0.4,0 c0.9,0.2,1.6,1,1.6,2v4v4v3.6c0,0.9,0.4,1.7,1,2.3l2,1.7V30c0-1.1-0.3-1.5-1-2.3V18c0-1.9-1-1-1-4c0-1.1,0.3-2.3,0.5-3.1 c0.2-0.7,1-1,1.6-0.7c1.5,0.7,4.5,1.9,7.9,1.9s6.3-1.1,7.9-1.9c0.7-0.3,1.4,0,1.6,0.7c0.3,0.9,0.5,2.1,0.5,3.1c0,3-1,2.1-1,4v9.7 c-0.7,0.8-1,1.3-1,2.3v7.6l2-1.7c0.7-0.6,1-1.4,1-2.3V30v-4v-4c0-1,0.7-1.8,1.6-2c0.1,0,0.3,0,0.4,0c0,0,3-5,3-17C40,3,37,4,35,4z"/>
        <path fill="#eee" d="M22 23.9c0 0-1.3.1-3 .1s-3-.9-3-1.1c0-.9.3-2.2 2-2.2S22 23.9 22 23.9zM26 23.9c0 0 1.3.1 3 .1s3-.8 3-1.1c0-.9-.3-2.2-2-2.2S26 23.9 26 23.9z"/>
        <g><path fill="#424242" d="M23 24c-3-1-4-5-6-5-3 0-3 3.8-3 3.8s1-1.8 2-1.8C18 21 19 24 23 24zM25 24c3-1 4-5 6-5 3 0 3 3.8 3 3.8S33 21 32 21C30 21 29 24 25 24z"/></g>
        <g><path fill="#424242" d="M18 23c0 .6.4 1 1 1s1-.4 1-1-.4-1-1-1S18 22.4 18 23M30 23c0 .6-.4 1-1 1s-1-.4-1-1 .4-1 1-1S30 22.4 30 23"/></g>
    </g>
`;

// Wolverine Masqué avec Griffes
const WOLVERINE_ACTION_SVG = `
    <g class="wolverine-state-action" style="opacity: 0;">
        <!-- Griffes -->
        <g transform="translate(-10, -50) scale(0.1)">
             <path fill="#ffca28" d="M280.3 30.04c-33.4 19.78-70.7 55.47-104.5 97.06-47.4 58.3-88.85 127.5-109.81 176.6l1.69 8.9 7.61-1.4.83-1.5c16.57-30.5 41.98-66 72.18-101.7 38.3-61.4 84.1-127.56 132-177.96zm113.9 2.72c-43 15.92-96.3 52.79-146.1 97.94-64.9 59-124.9 131.3-154.73 185.2l1.6 11.6 12.93-5.8c8.3-9.9 17-19.9 24.4-28 64.8-85.2 170.9-189.4 261.9-260.94zM473 81.09c-47.5 7.72-106.6 38.31-163.9 79.31-71.2 50.9-140 116.6-183.9 168.7l1.4 19.5L151 347c73.7-85.1 198.4-193.7 322-265.91zM47.34 303L18 344v144l37.32-14s50.58 17.1 72.68 17.7c31.5.8 72.7-48.2 74.7-57.7 1.6-7.9-3.8-14.7-8.8-21.4-19.9 14.2-35.1 20.7-61.8 6.5 30.6-6.1 34.2-5.7 53.6-21.9 10-9 12.3-19.8 11.5-29.5-.5-6-14.3-10.5-22.4-20.5-5.6 6.2-10 11.3-15.1 17.2l-49.7 3.4-1.9-26.5-28.48 10-2.58-22.1-23.74 4.2c-1.9-10.6-4.11-21.6-5.96-30.4z"/>
        </g>
        <!-- Masque -->
        <g transform="translate(14, 15) scale(.6)">
            <path fill="#ffca28" d="M34,38.2V26H14v12.2c0,1.1-0.6,2-1.5,2.6C9.1,42.9,6,46,6,46h36c0,0-3.1-3.1-6.5-5.2 C34.6,40.3,34,39.3,34,38.2z"/>
            <path fill="#ffb74d" d="M24,4C12.3,4,13,14,13,14c0,3.7,0,13,0,13v6.6c0,0.9,0.4,1.7,1,2.3l6.1,5.4c0.5,0.5,1.2,0.7,2,0.7 H24h1.9c0.7,0,1.4-0.3,2-0.7l6.1-5.4c0.7-0.6,1-1.4,1-2.3V26c0,0,0-8.3,0-12C35,14,35.7,4,24,4z"/>
            <path fill="#ffd600" d="M36,16.2l-1,17.4c0,0.9-0.4,1.7-1,2.3l-3,2.6V27l2-2c-4.2,0.8-6.3,2.4-8,4h-1h-1 c-1.7-1.6-3.8-3.2-8-4l2,2v11.5l-3-2.6c-0.7-0.6-1-1.4-1-2.3l-1-17.4c0-2.1,0.2-3.9,0.7-5.4C12.7,10.9,15,3,24,3s11.3,7.9,11.3,7.9 C35.8,12.4,36,14.2,36,16.2z"/>
            <path fill="#424242" d="M37.5 22c-.7 1.5-1 3.2-1.1 4.8L36 33.6c0 .9-.4 1.7-1 2.3l-4 2.6V27l2-2c-4.2.8-6.3 2.4-8 4l.9-8.5c.1-.9.5-1.8 1.2-2.4 2-2 7.7-7.2 13-17C42.3 9.3 39.2 18.1 37.5 22zM10.5 22c.7 1.5 1 3.2 1.1 4.8l.4 6.9c0 .9.4 1.7 1 2.3l4 2.6V27l-2-2c4.2.8 6.3 2.4 8 4l-.9-8.5c-.1-.9-.5-1.8-1.2-2.4-2-2-7.7-7.2-13-17C5.8 9.3 8.8 18.1 10.5 22z"/>
            <path fill="#3b3b3b" d="M27.8,26.8c-1.1,0.6-1.9,1.3-2.7,2c0,0-0.1,0.1-0.1,0.1h-1l1.5-4.5L27.8,26.8z"/>
            <path fill="#ffd600" d="M24 23L25.5 24.5 25 29 24 29z"/>
            <path fill="#fb8c00" d="M20.4,34.7l-0.9-1.8c0.1,0,1.8-0.9,4.4-0.9c2.6,0,4.4,0.9,4.4,0.9l-0.9,1.8c0,0-1.4-0.7-3.6-0.7 C21.9,34,20.5,34.7,20.4,34.7z"/>
            <path fill="#eee" d="M26 24c0 0 1.3 0 3 0s3-.6 3-.7c0-.6-.3-1.3-2-1.3S26 24 26 24zM22 24c0 0-1.3 0-3 0s-3-.6-3-.7c0-.6.3-1.3 2-1.3S22 24 22 24z"/>
            <path fill="#616161" d="M20.2,26.8c1.1,0.6,1.9,1.3,2.7,2c0,0,0.1,0.1,0.1,0.1h1l-1.5-4.5L20.2,26.8z"/>
            <path fill="#ffd600" d="M24 23L22.5 24.5 23 29 24 29z"/>
            <path fill="#ffd600" d="M23 21H25V24H23z"/>
        </g>
    </g>
`;

let isShowingAction = false;

export function initWolverineUI() {
    const container = document.getElementById('wolverine-layer');
    if (!container) return;

    container.innerHTML = `
        <g transform="translate(256, 175) scale(6)">${LOGAN_UNMASKED_SVG}</g>
        <g transform="translate(256, 175) scale(6)">${WOLVERINE_ACTION_SVG}</g>
    `;

    container.style.cursor = "pointer";
    container.style.pointerEvents = "auto";

    container.onclick = (e) => {
        e.stopPropagation();
        toggleWolverineState();
    };
}

export function toggleWolverineState() {
    isShowingAction = !isShowingAction;

    const logan = document.querySelector('.wolverine-state-logan');
    const action = document.querySelector('.wolverine-state-action');

    if (isShowingAction) {
        animate(logan, { opacity: 0, duration: 400, easing: 'easeInOutQuad' });
        animate(action, { opacity: 1, duration: 400, easing: 'easeInOutQuad' });
    } else {
        animate(logan, { opacity: 1, duration: 400, easing: 'easeInOutQuad' });
        animate(action, { opacity: 0, duration: 400, easing: 'easeInOutQuad' });
    }
}
